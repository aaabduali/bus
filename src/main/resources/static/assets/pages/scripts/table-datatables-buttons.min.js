$(document).ready( function () {
    var table = $('#datatable_ajax').DataTable({
        "sAjaxSource": "../routes/table",
        "sPaginationType" : 'simple_numbers',
        "iDisplayLength": 10,
        "sAjaxDataProp": "",
        "order": [[ 0, "asc" ]],
        "autoWidth":true,
        dom: "Bftipr",
        buttons: [
            {
                extend: "print",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ,4 ,5]
                },

            },
            {
                extend: "pdfHtml5",
                className: "dt-button buttons-print btn dark btn-outline",
                pageSize: 'LEGAL',
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ,4 ,5]
                }
            },
            {
                extend: "excel",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ,4 ,5]
                }
            },
        ],
        "aoColumns": [
            { "mData": "id" },
            { "mData": "departure" },
            { "mData": "destination" },
            { "mData": "time" },
            {"mData":"price"},
            {"mData":"bus.plate"},
            { "mRender": function (data, type, row) {
                    return '<center><a data-toggle="modal" data-target="#myModal'+row.id+'"><i class="icon-trash"></i></a></center>' +
                        '<div class="modal fade" id="myModal'+row.id+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">' +
                        '<div class="modal-dialog" role="document">' +
                        '<div class="modal-content">' +
                        '<div class="modal-header">' +
                        '<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                        '<h4 class="modal-title" id="myModalLabel">Confirm</h4>' +
                        '</div>' +
                        '<div class="modal-body">' +
                        '<p>Are you sure?</p>' +
                        '</div>' +
                        '<div class="modal-footer">' +
                        '<button type="button" class="btn btn-default" data-dismiss="modal">Cancle</button>' +
                        '<a href="/routes/delete/'+row.id+'" class="btn btn-danger" role="button">Delete</a></div>' +
                        '</div>' +
                        '</div>' +
                        '</div>'
                }}
        ],

    });
    var bus = $('#bus_table').DataTable({
        "sAjaxSource": "../bus/table",
        "sPaginationType" : 'simple_numbers',
        "iDisplayLength": 10,
        "sAjaxDataProp": "",
        "order": [[ 0, "asc" ]],
        "autoWidth":true,
        dom: "Bftipr",
        buttons: [
            {
                extend: "print",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                },

            },
            {
                extend: "pdfHtml5",
                className: "dt-button buttons-print btn dark btn-outline",
                pageSize: 'LEGAL',
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
            {
                extend: "excel",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
        ],
        "aoColumns": [
            { "mData": "id" },
            { "mData": "plate" },
            { "mData": "seats" },
            { "mData": "assigned" },

            { "mRender": function (data, type, row) {
                    return '<center><a data-toggle="modal" data-target="#myModal'+row.id+'"><i class="icon-trash"></i></a></center>' +
                        '<div class="modal fade" id="myModal'+row.id+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">' +
                        '<div class="modal-dialog" role="document">' +
                        '<div class="modal-content">' +
                        '<div class="modal-header">' +
                        '<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                        '<h4 class="modal-title" id="myModalLabel">Confirm</h4>' +
                        '</div>' +
                        '<div class="modal-body">' +
                        '<p>Are you sure?</p>' +
                        '</div>' +
                        '<div class="modal-footer">' +
                        '<button type="button" class="btn btn-default" data-dismiss="modal">Cancle</button>' +
                        '<a href="/buses/delete/'+row.id+'" class="btn btn-danger" role="button">Delete</a></div>' +
                        '</div>' +
                        '</div>' +
                        '</div>'
                }}
        ],

    });
    var agent = $('#agent_table').DataTable({
        "sAjaxSource": "../agents/table",
        "sPaginationType" : 'simple_numbers',
        "iDisplayLength": 10,
        "sAjaxDataProp": "",
        "order": [[ 0, "asc" ]],
        "autoWidth":true,
        dom: "Bftipr",
        buttons: [
            {
                extend: "print",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                },

            },
            {
                extend: "pdfHtml5",
                className: "dt-button buttons-print btn dark btn-outline",
                pageSize: 'LEGAL',
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
            {
                extend: "excel",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
        ],
        "aoColumns": [
            { "mData": "id" },
            { "mData": "firstName" },
            { "mData": "lastName" },
            { "mData": "phoneNumber" },
            { "mData": "area" },
            { "mRender": function (data, type, row) {
                    return '<center><a data-toggle="modal" data-target="#myModal'+row.id+'"><i class="icon-trash"></i></a></center>' +
                        '<div class="modal fade" id="myModal'+row.id+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">' +
                        '<div class="modal-dialog" role="document">' +
                        '<div class="modal-content">' +
                        '<div class="modal-header">' +
                        '<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                        '<h4 class="modal-title" id="myModalLabel">Confirm</h4>' +
                        '</div>' +
                        '<div class="modal-body">' +
                        '<p>Are you sure?</p>' +
                        '</div>' +
                        '<div class="modal-footer">' +
                        '<button type="button" class="btn btn-default" data-dismiss="modal">Cancle</button>' +
                        '<a href="/agents/delete/'+row.id+'" class="btn btn-danger" role="button">Delete</a></div>' +
                        '</div>' +
                        '</div>' +
                        '</div>'
                }}
        ],

    });
    var user = $('#user_table').DataTable({
        "sAjaxSource": "../users/table",
        "sPaginationType" : 'simple_numbers',
        "iDisplayLength": 10,
        "sAjaxDataProp": "",
        "order": [[ 0, "asc" ]],
        "autoWidth":true,
        dom: "Bftipr",
        buttons: [
            {
                extend: "print",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                },

            },
            {
                extend: "pdfHtml5",
                className: "dt-button buttons-print btn dark btn-outline",
                pageSize: 'LEGAL',
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
            {
                extend: "excel",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
        ],
        "aoColumns": [
            { "mData": "id" },
            { "mData": "firstName" },
            { "mData": "lastName" },
            { "mData": "username" },
            { "mData": "phone" },
            { "mData": "roles[0].role" },
            { "mRender": function (data, type, row) {
                    return '<center><a data-toggle="modal" data-target="#myModal'+row.id+'"><i class="icon-trash"></i></a></center>' +
                        '<div class="modal fade" id="myModal'+row.id+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">' +
                        '<div class="modal-dialog" role="document">' +
                        '<div class="modal-content">' +
                        '<div class="modal-header">' +
                        '<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                        '<h4 class="modal-title" id="myModalLabel">Confirm</h4>' +
                        '</div>' +
                        '<div class="modal-body">' +
                        '<p>Are you sure?</p>' +
                        '</div>' +
                        '<div class="modal-footer">' +
                        '<button type="button" class="btn btn-default" data-dismiss="modal">Cancle</button>' +
                        '<a href="/user/delete/'+row.id+'" class="btn btn-danger" role="button">Delete</a></div>' +
                        '</div>' +
                        '</div>' +
                        '</div>'
                }}
        ],

    });
    var agent = $('#agent_report').DataTable({

        // Internationalisation. For more info refer to http://datatables.net/manual/i18n
        "language": {
            "aria": {
                "sortAscending": ": activate to sort column ascending",
                "sortDescending": ": activate to sort column descending"
            },
            "emptyTable": "No data available in table",
            "info": "Showing _START_ to _END_ of _TOTAL_ entries",
            "infoEmpty": "No entries found",
            "infoFiltered": "(filtered1 from _MAX_ total entries)",
            "lengthMenu": "_MENU_ entries",
            "search": "Search:",
            "zeroRecords": "No matching records found"
        },

        // Or you can use remote translation file
        //"language": {
        //   url: '//cdn.datatables.net/plug-ins/3cfcc339e89/i18n/Portuguese.json'
        //},


        buttons: [
            { extend: 'print', className: 'btn dark btn-outline' },
            { extend: 'copy', className: 'btn red btn-outline' },
            { extend: 'pdf', className: 'btn green btn-outline' },
            { extend: 'excel', className: 'btn yellow btn-outline ' },
            { extend: 'csv', className: 'btn purple btn-outline ' },
            { extend: 'colvis', className: 'btn dark btn-outline', text: 'Columns'}
        ],

        // setup responsive extension: http://datatables.net/extensions/responsive/
        responsive: true,

        //"ordering": false, disable column ordering
        //"paging": false, disable pagination

        "order": [
            [0, 'asc']
        ],

        "lengthMenu": [
            [5, 10, 15, 20, -1],
            [5, 10, 15, 20, "All"] // change per page values here
        ],
        // set the initial value
        "pageLength": 10,

        "dom": "<'row' <'col-md-12'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>", // horizobtal scrollable datatable

        // Uncomment below line("dom" parameter) to fix the dropdown overflow issue in the datatable cells. The default datatable layout
        // setup uses scrollable div(table-scrollable) with overflow:auto to enable vertical scroll(see: assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js).
        // So when dropdowns used the scrollable div should be removed.
        //"dom": "<'row' <'col-md-12'T>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r>t<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",



    });
    $(table).on( 'click', 'tbody tr', function () {
        window.location.href = $(this).attr('href');
    } );
    $(user).on( 'click', 'tbody tr', function () {
        window.location.href = $(this).attr('href');
    } );
    $(agent).on( 'click', 'tbody tr', function () {
        window.location.href = $(this).attr('href');
    } );
    $(bus).on( 'click', 'tbody tr', function () {
        window.location.href = $(this).attr('href');
    } );

});

