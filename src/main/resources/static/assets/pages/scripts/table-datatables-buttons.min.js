$(document).ready( function () {
    var table = $('#datatable_ajax').DataTable({
        "sAjaxSource": "../routes/table",
        "sPaginationType" : 'simple_numbers',
        "iDisplayLength": 10,
        "sAjaxDataProp": "",
        "order": [[ 0, "asc" ]],
        "autoWidth":true,
        dom: "Bftipr",
        buttons: [
            {
                extend: "print",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ,4 ,5]
                },

            },
            {
                extend: "pdfHtml5",
                className: "dt-button buttons-print btn dark btn-outline",
                pageSize: 'LEGAL',
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ,4 ,5]
                }
            },
            {
                extend: "excel",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ,4 ,5]
                }
            },
        ],
        "aoColumns": [
            { "mData": "id" },
            { "mData": "departure" },
            { "mData": "destination" },
            { "mData": "time" },
            {"mData":"price"},
            {"mData":"bus.plate"},
            { "mRender": function (data, type, row) {
                    return '<center><a data-toggle="modal" data-target="#myModal'+row.id+'"><i class="icon-trash"></i></a></center>' +
                        '<div class="modal fade" id="myModal'+row.id+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">' +
                        '<div class="modal-dialog" role="document">' +
                        '<div class="modal-content">' +
                        '<div class="modal-header">' +
                        '<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                        '<h4 class="modal-title" id="myModalLabel">Confirm</h4>' +
                        '</div>' +
                        '<div class="modal-body">' +
                        '<p>Are you sure?</p>' +
                        '</div>' +
                        '<div class="modal-footer">' +
                        '<button type="button" class="btn btn-default" data-dismiss="modal">Cancle</button>' +
                        '<a href="/routes/delete/'+row.id+'" class="btn btn-danger" role="button">Delete</a></div>' +
                        '</div>' +
                        '</div>' +
                        '</div>'
                }}
        ],

    });
    var bus = $('#bus_table').DataTable({
        "sAjaxSource": "../bus/table",
        "sPaginationType" : 'simple_numbers',
        "iDisplayLength": 10,
        "sAjaxDataProp": "",
        "order": [[ 0, "asc" ]],
        "autoWidth":true,
        dom: "Bftipr",
        buttons: [
            {
                extend: "print",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                },

            },
            {
                extend: "pdfHtml5",
                className: "dt-button buttons-print btn dark btn-outline",
                pageSize: 'LEGAL',
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
            {
                extend: "excel",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
        ],
        "aoColumns": [
            { "mData": "id" },
            { "mData": "plate" },
            { "mData": "seats" },
            { "mData": "assigned" },

            { "mRender": function (data, type, row) {
                    return '<center><a data-toggle="modal" data-target="#myModal'+row.id+'"><i class="icon-trash"></i></a></center>' +
                        '<div class="modal fade" id="myModal'+row.id+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">' +
                        '<div class="modal-dialog" role="document">' +
                        '<div class="modal-content">' +
                        '<div class="modal-header">' +
                        '<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                        '<h4 class="modal-title" id="myModalLabel">Confirm</h4>' +
                        '</div>' +
                        '<div class="modal-body">' +
                        '<p>Are you sure?</p>' +
                        '</div>' +
                        '<div class="modal-footer">' +
                        '<button type="button" class="btn btn-default" data-dismiss="modal">Cancle</button>' +
                        '<a href="/buses/delete/'+row.id+'" class="btn btn-danger" role="button">Delete</a></div>' +
                        '</div>' +
                        '</div>' +
                        '</div>'
                }}
        ],

    });
    var agent = $('#agent_table').DataTable({
        "sAjaxSource": "../agents/table",
        "sPaginationType" : 'simple_numbers',
        "iDisplayLength": 10,
        "sAjaxDataProp": "",
        "order": [[ 0, "asc" ]],
        "autoWidth":true,
        dom: "Bftipr",
        buttons: [
            {
                extend: "print",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                },

            },
            {
                extend: "pdfHtml5",
                className: "dt-button buttons-print btn dark btn-outline",
                pageSize: 'LEGAL',
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
            {
                extend: "excel",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
        ],
        "aoColumns": [
            { "mData": "id" },
            { "mData": "firstName" },
            { "mData": "lastName" },
            { "mData": "phoneNumber" },
            { "mData": "area" },
            { "mRender": function (data, type, row) {
                    return '<center><a data-toggle="modal" data-target="#myModal'+row.id+'"><i class="icon-trash"></i></a></center>' +
                        '<div class="modal fade" id="myModal'+row.id+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">' +
                        '<div class="modal-dialog" role="document">' +
                        '<div class="modal-content">' +
                        '<div class="modal-header">' +
                        '<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                        '<h4 class="modal-title" id="myModalLabel">Confirm</h4>' +
                        '</div>' +
                        '<div class="modal-body">' +
                        '<p>Are you sure?</p>' +
                        '</div>' +
                        '<div class="modal-footer">' +
                        '<button type="button" class="btn btn-default" data-dismiss="modal">Cancle</button>' +
                        '<a href="/agents/delete/'+row.id+'" class="btn btn-danger" role="button">Delete</a></div>' +
                        '</div>' +
                        '</div>' +
                        '</div>'
                }}
        ],

    });
    var user = $('#user_table').DataTable({
        "sAjaxSource": "../users/table",
        "sPaginationType" : 'simple_numbers',
        "iDisplayLength": 10,
        "sAjaxDataProp": "",
        "order": [[ 0, "asc" ]],
        "autoWidth":true,
        dom: "Bftipr",
        buttons: [
            {
                extend: "print",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                },

            },
            {
                extend: "pdfHtml5",
                className: "dt-button buttons-print btn dark btn-outline",
                pageSize: 'LEGAL',
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
            {
                extend: "excel",
                className: "dt-button buttons-print btn dark btn-outline",
                exportOptions: {
                    columns: [ 0, 1, 2, 3 ]
                }
            },
        ],
        "aoColumns": [
            { "mData": "id" },
            { "mData": "firstName" },
            { "mData": "lastName" },
            { "mData": "username" },
            { "mData": "phone" },
            { "mData": "roles[0].role" },
            { "mRender": function (data, type, row) {
                    return '<center><a data-toggle="modal" data-target="#myModal'+row.id+'"><i class="icon-trash"></i></a></center>' +
                        '<div class="modal fade" id="myModal'+row.id+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">' +
                        '<div class="modal-dialog" role="document">' +
                        '<div class="modal-content">' +
                        '<div class="modal-header">' +
                        '<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                        '<h4 class="modal-title" id="myModalLabel">Confirm</h4>' +
                        '</div>' +
                        '<div class="modal-body">' +
                        '<p>Are you sure?</p>' +
                        '</div>' +
                        '<div class="modal-footer">' +
                        '<button type="button" class="btn btn-default" data-dismiss="modal">Cancle</button>' +
                        '<a href="/user/delete/'+row.id+'" class="btn btn-danger" role="button">Delete</a></div>' +
                        '</div>' +
                        '</div>' +
                        '</div>'
                }}
        ],

    });

    $(table).on( 'click', 'tbody tr', function () {
        window.location.href = $(this).attr('href');
    } );
    $(user).on( 'click', 'tbody tr', function () {
        window.location.href = $(this).attr('href');
    } );
    $(agent).on( 'click', 'tbody tr', function () {
        window.location.href = $(this).attr('href');
    } );
    $(bus).on( 'click', 'tbody tr', function () {
        window.location.href = $(this).attr('href');
    } );

});

